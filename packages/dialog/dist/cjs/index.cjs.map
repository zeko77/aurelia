{"version":3,"file":"index.cjs","sources":["../../src/utilities-di.ts","../../src/plugins/dialog/dialog-interfaces.ts","../../src/utilities.ts","../../src/plugins/dialog/dialog-controller.ts","../../src/plugins/dialog/dialog-service.ts","../../src/plugins/dialog/dialog-default-impl.ts","../../src/plugins/dialog/dialog-configuration.ts"],"sourcesContent":[null,null,null,null,null,null,null],"names":["createInterface","DI","singletonRegistration","Registration","singleton","instanceRegistration","instance","callbackRegistration","callback","IDialogService","IDialogController","IDialogDomRenderer","IDialogDom","IDialogGlobalSettings","DialogOpenResult","constructor","wasCancelled","dialog","this","static","DialogCloseResult","status","value","DialogDeactivationStatuses","createError","message","Error","isPromise","v","Promise","isFunction","DialogController","p","container","ctn","closed","resolve","reject","_resolve","_reject","inject","IPlatform","IContainer","activate","settings","createChild","model","template","rejectOnCancel","hostRenderer","get","dialogTargetHost","host","document","body","dom","render","rootEventTarget","has","IEventTarget","contentHost","contains","register","INode","r","cmp","Object","assign","getOrCreateVm","$dialog","canActivate","then","dispose","createDialogCancelError","create","onResolve","ctrlr","controller","Controller","$el","CustomElementDefinition","getDefinition","name","CustomElement","generateName","overlay","addEventListener","mouseEvent","e","deactivate","_closingPromise","deactivating","dialogResult","promise","canDeactivate","removeEventListener","catch","reason","ok","cancel","error","closeError","createDialogCloseError","handleEvent","event","overlayDismiss","target","Component","component","EmptyComponent","registerResolver","HTMLElement","Element","InstanceProvider","invoke","Ctor","isType","output","msg","DialogService","_ctn","_defaultSettings","dlgs","controllers","slice","top","length","AppTask","dialogService","closeAll","openDialogController","open","asDialogOpenPromise","$settings","DialogSettings","from","load","loadedSettings","dialogController","openResult","push","window","$removeController","remove","all","Array","map","result","unclosedControllers","filter","unclosed","idx","indexOf","splice","keyEvent","key","getActionKey","keyboard","includes","srcs","_validate","_normalize","loaded","maybePromise","resolveAll","loadedCmp","loadedTpl","lock","whenClosed","onfulfilled","onrejected","code","keyCode","DefaultDialogGlobalSettings","startingZIndex","baseWrapperCss","DefaultDialogDomRenderer","wrapperCss","overlayCss","hostCss","dialogHost","doc","h","css","el","createElement","style","cssText","wrapper","appendChild","DefaultDialogDom","createDialogConfiguration","settingsProvider","registrations","creating","customize","cb","regs","DialogConfiguration","NoopDialogGlobalSettings","DialogDefaultConfiguration","noop"],"mappings":"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"}